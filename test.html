<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>Basic Fragment Shader</title>

<!-- zimjs.com - JavaScript Canvas Framework -->
<script type=module>

import zim from "https://zimjs.org/cdn/016/zim";

// See Docs under Frame for FIT, FILL, FULL, and TAG
new Frame(FIT, 1024, 768, light, dark, ready);
function ready() {
    
    // given F (Frame), S (Stage), W (width), H (height)
    // put code here

    // inside the fragment

    // out vec4 fragColor;
    // void main(){
    //     fragColor = vec4(gl_FragCoord.x/iResolution.x,0,0,1);
    //     // 1.-gl_FragCoord.y/iResolution.y to reverse (pay attention to the dot)
    //     // gl_FragCoord.xy/iResolution.xy,0,1 (reduce a number)
    // }

    const fragment = `
    
    uniform float green;
    uniform vec3 color;
    uniform float ratio;

    void mainImage( out vec4 fragColor, in vec2 fragCoord){
        
        // fragColor = vec4(fragCoord.xy/iResolution.xy,0,1);
        // fragColor = vec4(0,green,0,1);
        // fragColor = vec4(color,1);

        // fragColor = mix(vec4(1,1,0,1),vec4(0,1,1,1),fragCoord.x / iResolution.x);
        fragColor = mix(vec4(fragCoord.x / iResolution.x,1,0,1), vec4(0,fragCoord.y / iResolution.y,1,1), ratio);
       
    }

    `;

    const uniforms = new Uniforms({
        green:1,
        color:[0,0,.5],
        ratio:.5
    })
    
    new Shader(W,H,fragment,uniforms).center();

    // timeout(1,()=>{
    //     // uniforms.green=.5;
    //     uniforms.color_C=.5
    // });

    // uniforms.animate({
    //     props:{color_A:1,color_B:.5,color_C:0},
    //     rewind:true,
    //     loop:true
    // });

    // make a slider to change how blue it is

    // const slider = new Slider({min:0,max:1,currentValue:uniforms.color_C}).center().change(()=>{
    //     uniforms.color_C = 1-slider.currentValue;
    //     zog(slider.currentValue);
    // })

    // new Slider({min:0,max:1,currentValue:uniforms.color_C})
    //     .center()
    //     .wire(uniforms,"color_C");

    new Slider({min:0, max:1, currentValue:uniforms.ratio})
                    .center()
                    .wire(uniforms, "ratio");
        
} // end ready

</script>
<meta name="viewport" content="width=device-width, user-scalable=no" />
</head>
<body></body>
</html>